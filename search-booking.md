# Поиск бронирований

## Введение

Для поиска бронирований используется сервис [Trip_SearchRQ](https://developer.sabre.com/docs/read/soap_apis/management/itinerary/search_for_itineraries/resources).

## Критерии поиска

TODO Primary Criterias

### Коды бронирований

В запросе можно указать до 50 кодов бронированирований в атрибутах ```/@Id``` в последовательно расположенных элементах ```/Trip_SearchRQ/ReadRequests/ReservationReadRequest/LocatorCriteria/Locator```.

### Даты

TODO

### Параметры сегментов

TODO

### Перелеты

TODO

### Билеты

TODO

### Имена

TODO

### Адреса электронной почты

В запросе можно указать до 3 адресов электронной почты в последовательно расположенных элементах ```/Trip_SearchRQ/ReadRequests/ReservationReadRequest/EmailCriteria/EmailAddress```. В атрибуте ```/@MatchMode``` необходимо указать как именно система будет производить сравнение указанных адресов электронной почты с адресами электронной почты в бронированиях:
- ```EXACT``` — найденный адрес электронной почты должен совпадать с указанным в запросе
- ```START``` — найденный адрес электронной почты должен начинаться с указанного в запросе
- ```END``` — найденный адрес электронной почты должен заканчиваться указанным в запросе
- ```ANYWHERE``` — найденный адрес электронной почты должен содержать указанный в запросе

TODO SIMILAR, EXACT_NO_COMPRESS

### Номера телефонов

В запросе можно указать до 3 номеров телефонов в последовательно расположенных элементах ```/Trip_SearchRQ/ReadRequests/ReservationReadRequest/TelephoneCriteria/PhoneNumber```. В атрибуте ```/@MatchMode``` необходимо указать как именно система будет производить сравнение указанных номеров телефонов с номерами телефонов в бронированиях:
- ```EXACT``` — найденный номер телефона должен совпадать с указанным в запросе
- ```START``` — найденный номер телефона должен начинаться с указанного в запросе
- ```END``` — найденный номер телефона должен заканчиваться указанным в запросе
- ```ANYWHERE``` — найденный номер телефона должен содержать указанный в запросе

Сравнение номеров телефонов производиться только по цифрам, остальные символы при сравнении игнорируются.

### SSR и OSI

TODO

### Документы

TODO

### Ремарки

TODO

### Карты часто летающих пассажиров

TODO

## Выбор PCC

В запросе должны быть указаны PCC, в которых необходимо производить поиск бронирований, в последовательно расположенных элементах ```/Trip_SearchRQ/ReadRequests/ReservationReadRequest/PosCriteria/Pcc```.

Для того, чтобы поиск также производился по тем PCC, с которыми у указанных выше PCC есть Branch Access, необходимо указать значение ```true``` у атрибута ```/Trip_SearchRQ/ReadRequests/ReservationReadRequest/PosCriteria/@AnyBranch```.

## Параметры поиска

В элементе ```/Trip_SearchRQ/ReadRequests/ReservationReadRequest/ReturnOptions``` необходимо указать следующие параметры поиска:
- ```/@MaxItemsReturned``` — максимальное количество найденных бронирований. Обратите внимание на то, что в случае, если число найденных бронирований превысит запрошенное число, то в ответе не будут возвращены найденные бронирования
- ```/@ResponseFormat``` — формат ответа. Всегда ```TVL```
- ```/@SearchType``` — тип поиска. Возможные значения:
    - ```ACTIVE``` — только активные бронирования
    - ```INACTIVE``` — только архивные бронирования
    - ```BOTH``` — все бронирования
- ```/@ViewName``` — массив данных для поиска. Всегда ```TripSearchBlobTN```
- ```/SubjectAreas/SubjectArea``` — объем данных в ответе. Всегда ```ITINERARY```

## Примеры

{% xmlsec "Пример запроса", false %}
TODO
{% endxmlsec %}

{% xmlsec "Пример ответа", false %}
TODO
{% endxmlsec %}