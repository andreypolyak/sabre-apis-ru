<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Оглавление:  Введение Сессии  Создание сессии (SessionCreateRQ) Обновление сессии (OTA_PingRQ) Закрытие сессии (SessionCloseRQ) Получение информации об используемых сессиях (OLTMC USER DISP NAME) Использование сессий, созданных в Sabre Red (OIATH)   Токены доступа  Создание токена доступа (TokenCreateRQ)       Введение #  Для аутентификации в системе Sabre при использовании Sabre APIs могут быть использованы два механизма:
 сессии (sessions) токены доступа (access tokens)  В таблице ниже описаны принципиальные различия двух механизмов:">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Аутентификация" />
<meta property="og:description" content="Оглавление:  Введение Сессии  Создание сессии (SessionCreateRQ) Обновление сессии (OTA_PingRQ) Закрытие сессии (SessionCloseRQ) Получение информации об используемых сессиях (OLTMC USER DISP NAME) Использование сессий, созданных в Sabre Red (OIATH)   Токены доступа  Создание токена доступа (TokenCreateRQ)       Введение #  Для аутентификации в системе Sabre при использовании Sabre APIs могут быть использованы два механизма:
 сессии (sessions) токены доступа (access tokens)  В таблице ниже описаны принципиальные различия двух механизмов:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://andreypolyak.github.io/sabre-apis-ru/authentication.html" /><meta property="article:section" content="" />



<title>Аутентификация | Рекомендации по работе с Sabre APIs</title>
<link rel="manifest" href="/sabre-apis-ru/manifest.json">
<link rel="icon" href="/sabre-apis-ru/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/sabre-apis-ru/book.min.08b033ee232fe01924e38ec1c0e5b3adff46ab5a6b0e4ed529466e69e1e02d56.css" integrity="sha256-CLAz7iMv4Bkk447BwOWzrf9Gq1prDk7VKUZuaeHgLVY=" crossorigin="anonymous">
  <script defer src="/sabre-apis-ru/flexsearch.min.js"></script>
  <script defer src="/sabre-apis-ru/ru.search.min.d02378bace0707ee4cb51e556cc7767b13ec2a6287ad10a25b8bc8963b3f28b4.js" integrity="sha256-0CN4us4HB&#43;5MtR5VbMd2exPsKmKHrRCiW4vIljs/KLQ=" crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-80320390-1', 'auto');
	
	ga('send', 'pageview');
}
</script><!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/sabre-apis-ru/"><span>Рекомендации по работе с Sabre APIs</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Поиск" aria-label="Поиск" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  <p class="menu-header"><strong>ВВЕДЕНИЕ</strong></p>
<ul>
<li><a href="/sabre-apis-ru/introduction.html">Начало работы</a></li>
<li><a href="/sabre-apis-ru/configuration.html">Конфигурация Sabre</a></li>
<li><a href="/sabre-apis-ru/tjr-settings.html">Настройки PCC</a></li>
<li><a href="/sabre-apis-ru/authentication.html"class=active>Аутентификация</a></li>
<li><a href="/sabre-apis-ru/services.html">Список сервисов</a></li>
<li><a href="/sabre-apis-ru/postman.html">Коллекция Postman</a></li>
</ul>
<p class="menu-header"><strong>ПОИСК ПЕРЕЛЕТОВ</strong></p>
<ul>
<li><a href="/sabre-apis-ru/shop.html">Поиск по заданным датам</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/shop-alternate-dates.html">Поиск по гибким датам</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/shop-by-fare.html">Поиск по кодам тарифов</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/get-availability.html">Поиск по расписаниям</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/shop-optimization.html">Оптимизация времени поиска</a></li>
</ul>
<p class="menu-header"><strong>БРОНИРОВАНИЯ</strong></p>
<ul>
<li><a href="/sabre-apis-ru/revalidate-itinerary.html">Проверка стоимости и наличия мест</a></li>
<li><a href="/sabre-apis-ru/create-booking.html">Создание бронирований</a>
<ul>
<li><a href="/sabre-apis-ru/create-booking-1step.html">Создание бронирований в 1 шаг</a></li>
<li><a href="/sabre-apis-ru/create-booking-2steps.html">Создание бронирований в 2 шага</a></li>
</ul>
</li>
<li><a href="/sabre-apis-ru/reprice-booking.html">Перерасчет стоимости</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/get-booking.html">Чтение бронирований</a></li>
<li><a href="/sabre-apis-ru/get-archive-booking.html">Чтение бронирований из архива</a></li>
<li><a href="/sabre-apis-ru/edit-booking.html">Редактирование бронирований</a></li>
<li><a href="/sabre-apis-ru/cancel-booking.html">Отмена бронирований</a></li>
<li><a href="/sabre-apis-ru/split-booking.html">Деление бронирований</a></li>
<li><a href="/sabre-apis-ru/get-history-booking.html">История бронирований</a></li>
</ul>
<p class="menu-header"><strong>ДОПОЛНИТЕЛЬНЫЙ КОНТЕНТ</strong></p>
<ul>
<li><a href="/sabre-apis-ru/brands.html">Брендированные тарифы</a></li>
<li><a href="/sabre-apis-ru/ancillaries.html">Дополнительные услуги</a>
<ul>
<li><a href="/sabre-apis-ru/get-ancillaries.html">Получение списка услуг</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/book-ancillaries.html">Бронирование услуг</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/cancel-ancillaries.html">Отмена услуг</a> <!-- raw HTML omitted --></li>
</ul>
</li>
<li><a href="/sabre-apis-ru/air-seats.html">Места в салоне</a>
<ul>
<li><a href="/sabre-apis-ru/get-air-seats.html">Получение карты мест</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/book-air-seats.html">Бронирование мест</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/cancel-air-seats.html">Отмена мест</a> <!-- raw HTML omitted --></li>
</ul>
</li>
</ul>
<p class="menu-header"><strong>БИЛЕТЫ И EMD</strong></p>
<ul>
<li><a href="/sabre-apis-ru/fop.html">Выбор форм оплаты</a></li>
<li><a href="/sabre-apis-ru/issue-ticket.html">Оформление билетов и EMD</a></li>
<li><a href="/sabre-apis-ru/get-ticket.html">Чтение масок билетов и EMD</a></li>
<li><a href="/sabre-apis-ru/void-ticket.html">Войдирование билетов и EMD</a></li>
<li><a href="/sabre-apis-ru/exchanges-refunds.html">Обмены и возвраты билетов</a>
<ul>
<li><a href="/sabre-apis-ru/shop-exchange-ticket.html">Поиск вариантов обмена</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/exchange-ticket.html">Обмен билетов</a></li>
<li><a href="/sabre-apis-ru/involuntary-exchange-ticket.html">Вынужденный обмен билетов</a></li>
<li><a href="/sabre-apis-ru/price-refund-ticket.html">Расчет стоимости возврата билетов</a></li>
<li><a href="/sabre-apis-ru/refund-ticket.html">Возврат билетов</a></li>
</ul>
</li>
<li><a href="/sabre-apis-ru/report-ticket.html">Формирование отчетов</a></li>
</ul>
<p class="menu-header"><strong>ОЧЕРЕДИ</strong></p>
<ul>
<li><a href="/sabre-apis-ru/queues.html">Обработка очередей</a></li>
<li><a href="/sabre-apis-ru/queue-place.html">Помещение бронирований в очереди</a></li>
<li><a href="/sabre-apis-ru/timelimit.html">Тайм-лимиты бронирований</a></li>
</ul>
<p class="menu-header"><strong>ПРАВИЛА ТАРИФОВ</strong></p>
<ul>
<li><a href="/sabre-apis-ru/fare-rules.html">Получение текста правил</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/structure-fare-rules.html">Получение структурированных правил</a> <!-- raw HTML omitted --></li>
<li><a href="/sabre-apis-ru/baggage.html">Получение норм провоза багажа</a></li>
</ul>
<p class="menu-header"><strong>ДРУГОЕ</strong></p>
<ul>
<li><a href="/sabre-apis-ru/change-pcc.html">Переход в другие PCC</a></li>
<li><a href="/sabre-apis-ru/currency-rates.html">Получение курсов валют</a></li>
<li><a href="/sabre-apis-ru/commands.html">Отправка терминальных команд</a></li>
</ul>










</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/sabre-apis-ru/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      <h1>Аутентификация</h1>
      
  <article class="markdown"><hr>
<div>
    <h3>Оглавление:</h3>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#введение">Введение</a></li>
    <li><a href="#сессии">Сессии</a>
      <ul>
        <li><a href="#создание-сессии-sessioncreaterq">Создание сессии (SessionCreateRQ)</a></li>
        <li><a href="#обновление-сессии-ota_pingrq">Обновление сессии (OTA_PingRQ)</a></li>
        <li><a href="#закрытие-сессии-sessioncloserq">Закрытие сессии (SessionCloseRQ)</a></li>
        <li><a href="#получение-информации-об-используемых-сессиях-oltmc-user-disp-name">Получение информации об используемых сессиях (OLTMC USER DISP NAME)</a></li>
        <li><a href="#использование-сессий-созданных-в-sabre-red-oiath">Использование сессий, созданных в Sabre Red (OIATH)</a></li>
      </ul>
    </li>
    <li><a href="#токены-доступа">Токены доступа</a>
      <ul>
        <li><a href="#создание-токена-доступа-tokencreaterq">Создание токена доступа (TokenCreateRQ)</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>
<hr>
<h2 id="введение">
  Введение
  <a class="anchor" href="#%d0%b2%d0%b2%d0%b5%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5">#</a>
</h2>
<p>Для аутентификации в системе Sabre при использовании Sabre APIs могут быть использованы два механизма:</p>
<ul>
<li>сессии (sessions)</li>
<li>токены доступа (access tokens)</li>
</ul>
<p>В таблице ниже описаны принципиальные различия двух механизмов:</p>
<table>
<thead>
<tr>
<th></th>
<th>Сессии</th>
<th>Токены доступа</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Используются для аутентификации и авторизации</strong></td>
<td>Да</td>
<td>Да</td>
</tr>
<tr>
<td><strong>Хранят состояние (каждый последующий запрос зависит от предыдущего)</strong></td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr>
<td><strong>Время жизни</strong></td>
<td>Гарантированное время жизни — 15 минут, максимальное время жизни — 30 минут</td>
<td>7 дней</td>
</tr>
<tr>
<td><strong>Одновременное использование одной сессии или токена в нескольких запросах</strong></td>
<td>Нет</td>
<td>Да</td>
</tr>
<tr>
<td><strong>Максимальное количество одновременно активных сессий или токенов доступа</strong></td>
<td>От 50 одновременно открытых сессий (в зависимости от настроек PCC)</td>
<td>Без ограничений</td>
</tr>
<tr>
<td><strong>Принудительное закрытие</strong></td>
<td><a href="http://files.developer.sabre.com/doc/developmentpatterns/NORMOAA_Pattern_2015-2-20.pdf">Каждое воскресенье в 00:15 по Центральноамериканскому времени (08:15 по Московскому времени летом и в 09:15 зимой)</a></td>
<td>Нет</td>
</tr>
<tr>
<td><strong>Поддержка сервисами</strong></td>
<td>Все сервисы</td>
<td>Некоторые сервисы (см. список в <a href="services.html">Список сервисов</a>)</td>
</tr>
<tr>
<td><strong>Создание</strong></td>
<td><a href="https://developer.sabre.com/docs/soap_apis/session_management/create_session">SessionCreateRQ</a></td>
<td><a href="https://developer.sabre.com/docs/read/soap_apis/session_management/create_access_token">TokenCreateRQ</a></td>
</tr>
<tr>
<td><strong>Закрытие</strong></td>
<td><a href="https://developer.sabre.com/docs/soap_apis/session_management/close_session">SessionCloseRQ</a></td>
<td>Недоступно</td>
</tr>
<tr>
<td><strong>Продление времени жизни</strong></td>
<td><a href="https://developer.sabre.com/docs/soap_apis/session_management/refresh_session">OTA_PingRQ</a> или отправка любого запроса</td>
<td>Недоступно</td>
</tr>
</tbody>
</table>
<p>После создания сессии или токена доступа в ответе будет представлен идентификатор сессии или токена доступа.</p>
<p>Пример идентификатора сессии:</p>
<pre tabindex="0"><code>Shared/IDL:IceSess\/SessMgr:1\.0.IDL/Common/!ICESMS\/RESA!ICESMSLB\/RES.LB!-3292053128691423346!1291480!0
</code></pre><p>Пример идентификатора токена доступа:</p>
<pre tabindex="0"><code>T1RLAQId95/WFF0HHN4hYzDJDxQdcQzEDhDPlavekGd+JIT1h1yTVCggAACwUYKogIH6j6DlWeQQbK3oVdLvm1P/B+y0FwmSZTetQIIBMnVOoQ8XJ5pql0LZpCsAfPWnLf9mndGQbJKBUZ0Ggs5gsdVwxJ/C0WEd1GHcAk6EzzpJLSTaEejbi1i4rxmZzynu9zlG6up6WomVrxutpOVly4EUmlLWcxxyrJ3S4kDYWzBPgB4ttLYaA4Jl9VbPvAKxtuULknOuMSZu9m1HxUFx+npDEqx/NoLmjma+TCg*
</code></pre><p>Полученный идентификатор необходимо указать в качестве значения элемента <code>/SOAP-ENV:Envelope/SOAP-ENV:Header/Security/BinarySecurityToken</code> любого запроса.</p>
<p>Дополнительную информацию об аутентификации в Sabre APIs можно получить на портале <a href="https://developer.sabre.com/guides/travel-agency/developer-guides/manage-token">Sabre Dev Studio</a>.</p>
<h2 id="сессии">
  Сессии
  <a class="anchor" href="#%d1%81%d0%b5%d1%81%d1%81%d0%b8%d0%b8">#</a>
</h2>
<h3 id="создание-сессии-sessioncreaterq">
  Создание сессии (SessionCreateRQ)
  <a class="anchor" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%81%d0%b5%d1%81%d1%81%d0%b8%d0%b8-sessioncreaterq">#</a>
</h3>
<p>Для создания сессии используется сервис <a href="https://developer.sabre.com/docs/soap_apis/session_management/create_session">SessionCreateRQ</a>.</p>
<p>В запросе необходимо указать:</p>
<ul>
<li><code>wsse:Username</code> — имя пользователя (референция, EPR)</li>
<li><code>wsse:Password</code> — пароль</li>
<li><code>Organization</code> — iPCC</li>
<li>элемент <code>Domain</code> должен содержать значение <code>DEFAULT</code></li>
</ul>
<p>Ответ будет содержать токен созданной сессии <code>wsse:BinarySecurityToken</code>, который необходимо использовать при отправке других запросов.</p>
<details ><summary>Пример запроса</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;SOAP-ENV:Envelope</span> <span style="color:#00c">xmlns:SOAP-ENV=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;SOAP-ENV:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;MessageHeader</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;PartyId&gt;</span>Agency<span style="color:#070">&lt;/PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;PartyId&gt;</span>Sabre<span style="color:#070">&lt;/PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;ConversationId&gt;</span>330c2c47-b98a-48b5-aa10-718d254ef3bc<span style="color:#070">&lt;/ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;MessageId&gt;</span>1d7aa47e-149a-4261-b421-741a4c452942<span style="color:#070">&lt;/MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Timestamp&gt;</span>2018-04-02T19:24:16<span style="color:#070">&lt;/Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/MessageData&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;Action&gt;</span>SessionCreateRQ<span style="color:#070">&lt;/Action&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;Security</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;UsernameToken&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Username&gt;</span>{{username}}<span style="color:#070">&lt;/Username&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Password&gt;</span>{{password}}<span style="color:#070">&lt;/Password&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Organization&gt;</span>{{pcc}}<span style="color:#070">&lt;/Organization&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Domain&gt;</span>DEFAULT<span style="color:#070">&lt;/Domain&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/UsernameToken&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/Security&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/SOAP-ENV:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;SOAP-ENV:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;SessionCreateRQ</span> <span style="color:#00c">Version=</span><span style="background-color:#fff0f0">&#34;1.0.0&#34;</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.opentravel.org/OTA/2002/11&#34;</span><span style="color:#070">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/SOAP-ENV:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/SOAP-ENV:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<details ><summary>Пример ответа</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;soap-env:Envelope</span> <span style="color:#00c">xmlns:soap-env=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;eb:MessageHeader</span> <span style="color:#00c">eb:version=</span><span style="background-color:#fff0f0">&#34;1.0&#34;</span> <span style="color:#00c">soap-env:mustUnderstand=</span><span style="background-color:#fff0f0">&#34;1&#34;</span> <span style="color:#00c">xmlns:eb=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Sabre<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Agency<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:ConversationId&gt;</span>330c2c47-b98a-48b5-aa10-718d254ef3bc<span style="color:#070">&lt;/eb:ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Service</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;sabreXML&#34;</span><span style="color:#070">&gt;</span>Session<span style="color:#070">&lt;/eb:Service&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Action&gt;</span>SessionCreateRS<span style="color:#070">&lt;/eb:Action&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:MessageId&gt;</span>1645456698561970611<span style="color:#070">&lt;/eb:MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:Timestamp&gt;</span>2018-04-02T19:24:16<span style="color:#070">&lt;/eb:Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:RefToMessageId&gt;</span>1d7aa47e-149a-4261-b421-741a4c452942<span style="color:#070">&lt;/eb:RefToMessageId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/eb:MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;wsse:Security</span> <span style="color:#00c">xmlns:wsse=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;wsse:BinarySecurityToken</span> <span style="color:#00c">EncodingType=</span><span style="background-color:#fff0f0">&#34;wsse:Base64Binary&#34;</span> <span style="color:#00c">valueType=</span><span style="background-color:#fff0f0">&#34;String&#34;</span><span style="color:#070">&gt;</span>Shared/IDL:IceSess\/SessMgr:1\.0.IDL/Common/!ICESMS\/ACPCRTC!ICESMSLB\/CRT.LB!-3161758806579122550!1655914!0<span style="color:#070">&lt;/wsse:BinarySecurityToken&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/wsse:Security&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;SessionCreateRS</span> <span style="color:#00c">status=</span><span style="background-color:#fff0f0">&#34;Approved&#34;</span> <span style="color:#00c">version=</span><span style="background-color:#fff0f0">&#34;1&#34;</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.opentravel.org/OTA/2002/11&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;ConversationId&gt;</span>330c2c47-b98a-48b5-aa10-718d254ef3bc<span style="color:#070">&lt;/ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/SessionCreateRS&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/soap-env:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<p>В случае, если логин или пароль в запросе неверные или учетная запись заблокирована, то система вернет ответ с ошибкой <code>USG_AUTHENTICATION_FAILED</code>. В этом случае рекомендуется <a href="configuration.html#%d1%81%d0%bc%d0%b5%d0%bd%d0%b0-%d0%bf%d0%b0%d1%80%d0%be%d0%bb%d1%8f-%d0%b8-%d1%80%d0%b0%d0%b7%d0%b1%d0%bb%d0%be%d0%ba%d0%b8%d1%80%d0%be%d0%b2%d0%ba%d0%b0-epr">сменить пароль и при необходимости разблокировать EPR</a>.</p>
<details ><summary>Пример ответа с ошибкой</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;soap-env:Envelope</span> <span style="color:#00c">xmlns:soap-env=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;eb:MessageHeader</span> <span style="color:#00c">eb:version=</span><span style="background-color:#fff0f0">&#34;1.0&#34;</span> <span style="color:#00c">soap-env:mustUnderstand=</span><span style="background-color:#fff0f0">&#34;1&#34;</span> <span style="color:#00c">xmlns:eb=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Sabre<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Agency<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:ConversationId&gt;</span>dcee8572-2958-47a3-bda5-13b15868325f<span style="color:#070">&lt;/eb:ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Action&gt;</span>ErrorRS<span style="color:#070">&lt;/eb:Action&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:MessageId&gt;</span>2327729667967520610<span style="color:#070">&lt;/eb:MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:Timestamp&gt;</span>2020-01-17T18:33:16<span style="color:#070">&lt;/eb:Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:RefToMessageId&gt;</span>1a35d735-4582-4756-9f4c-cd627ccf1786<span style="color:#070">&lt;/eb:RefToMessageId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/eb:MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;wsse:Security</span> <span style="color:#00c">xmlns:wsse=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;soap-env:Fault&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;faultcode&gt;</span>soap-env:Client.AuthenticationFailed<span style="color:#070">&lt;/faultcode&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;faultstring&gt;</span>Authentication failed<span style="color:#070">&lt;/faultstring&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;detail&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;StackTrace&gt;</span>com.sabre.universalservices.base.security.AuthenticationException: errors.authentication.USG_AUTHENTICATION_FAILED<span style="color:#070">&lt;/StackTrace&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/detail&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/soap-env:Fault&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/soap-env:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<h3 id="обновление-сессии-ota_pingrq">
  Обновление сессии (OTA_PingRQ)
  <a class="anchor" href="#%d0%be%d0%b1%d0%bd%d0%be%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d1%81%d0%b5%d1%81%d1%81%d0%b8%d0%b8-ota_pingrq">#</a>
</h3>
<p>Для того чтобы сессия не была закрыта по таймауту необходимо отправить запрос к сервису <a href="https://developer.sabre.com/docs/soap_apis/session_management/refresh_session">OTA_PingRQ</a>.</p>
<details ><summary>Пример запроса</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;SOAP-ENV:Envelope</span> <span style="color:#00c">xmlns:SOAP-ENV=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;SOAP-ENV:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;MessageHeader</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;PartyId&gt;</span>Agency<span style="color:#070">&lt;/PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;PartyId&gt;</span>Sabre<span style="color:#070">&lt;/PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;ConversationId&gt;</span>0dc27b92-e02b-4f1e-8355-97f2f9bd3a60<span style="color:#070">&lt;/ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;MessageId&gt;</span>87cb2dda-0464-4b96-9a72-baf8f6286bcf<span style="color:#070">&lt;/MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Timestamp&gt;</span>2018-04-02T19:25:16<span style="color:#070">&lt;/Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/MessageData&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;Action&gt;</span>OTA_PingRQ<span style="color:#070">&lt;/Action&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;Security</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;BinarySecurityToken</span> <span style="color:#00c">EncodingType=</span><span style="background-color:#fff0f0">&#34;Base64Binary&#34;</span> <span style="color:#00c">valueType=</span><span style="background-color:#fff0f0">&#34;String&#34;</span><span style="color:#070">&gt;</span>Shared/IDL:IceSess\/SessMgr:1\.0.IDL/Common/!ICESMS\/ACPCRTC!ICESMSLB\/CRT.LB!-3161758806579122550!1655914!0<span style="color:#070">&lt;/BinarySecurityToken&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/Security&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/SOAP-ENV:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;SOAP-ENV:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;OTA_PingRQ</span> <span style="color:#00c">Version=</span><span style="background-color:#fff0f0">&#34;1.0.0&#34;</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.opentravel.org/OTA/2003/05&#34;</span><span style="color:#070">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/SOAP-ENV:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/SOAP-ENV:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<details ><summary>Пример ответа</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;soap-env:Envelope</span> <span style="color:#00c">xmlns:soap-env=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;eb:MessageHeader</span> <span style="color:#00c">eb:version=</span><span style="background-color:#fff0f0">&#34;1.0&#34;</span> <span style="color:#00c">soap-env:mustUnderstand=</span><span style="background-color:#fff0f0">&#34;1&#34;</span> <span style="color:#00c">xmlns:eb=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Sabre<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Agency<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:ConversationId&gt;</span>0dc27b92-e02b-4f1e-8355-97f2f9bd3a60<span style="color:#070">&lt;/eb:ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Service</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;sabreXML&#34;</span><span style="color:#070">&gt;</span>Session<span style="color:#070">&lt;/eb:Service&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Action&gt;</span>OTA_PingRS<span style="color:#070">&lt;/eb:Action&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:MessageId&gt;</span>1647317699162230610<span style="color:#070">&lt;/eb:MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:Timestamp&gt;</span>2018-04-02T19:25:16<span style="color:#070">&lt;/eb:Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:RefToMessageId&gt;</span>87cb2dda-0464-4b96-9a72-baf8f6286bcf<span style="color:#070">&lt;/eb:RefToMessageId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/eb:MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;wsse:Security</span> <span style="color:#00c">xmlns:wsse=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;wsse:BinarySecurityToken</span> <span style="color:#00c">EncodingType=</span><span style="background-color:#fff0f0">&#34;wsse:Base64Binary&#34;</span> <span style="color:#00c">valueType=</span><span style="background-color:#fff0f0">&#34;String&#34;</span><span style="color:#070">&gt;</span>Shared/IDL:IceSess\/SessMgr:1\.0.IDL/Common/!ICESMS\/ACPCRTC!ICESMSLB\/CRT.LB!-3161758806579122550!1655914!0<span style="color:#070">&lt;/wsse:BinarySecurityToken&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/wsse:Security&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;OTA_PingRS</span> <span style="color:#00c">Version=</span><span style="background-color:#fff0f0">&#34;1.0.0&#34;</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.opentravel.org/OTA/2003/05&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;Success/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;EchoData/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/OTA_PingRS&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/soap-env:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<h3 id="закрытие-сессии-sessioncloserq">
  Закрытие сессии (SessionCloseRQ)
  <a class="anchor" href="#%d0%b7%d0%b0%d0%ba%d1%80%d1%8b%d1%82%d0%b8%d0%b5-%d1%81%d0%b5%d1%81%d1%81%d0%b8%d0%b8-sessioncloserq">#</a>
</h3>
<p>Для закрытия сессии используется сервис <a href="https://developer.sabre.com/docs/soap_apis/session_management/close_session">SessionCloseRQ</a>.</p>
<p>В запросе необходимо указать:</p>
<ul>
<li><code>wsse:BinarySecurityToken</code> — токен сессии</li>
</ul>
<details ><summary>Пример запроса</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;SOAP-ENV:Envelope</span> <span style="color:#00c">xmlns:SOAP-ENV=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;SOAP-ENV:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;MessageHeader</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;PartyId&gt;</span>Agency<span style="color:#070">&lt;/PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;PartyId&gt;</span>Sabre<span style="color:#070">&lt;/PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;ConversationId&gt;</span>ef18b24d-6c48-48f0-8357-ab4dbfc22742<span style="color:#070">&lt;/ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;MessageId&gt;</span>9f23c9a8-1cea-4ba4-8edd-b8d2f0335c57<span style="color:#070">&lt;/MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Timestamp&gt;</span>2018-04-02T19:25:33<span style="color:#070">&lt;/Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/MessageData&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;Action&gt;</span>SessionCloseRQ<span style="color:#070">&lt;/Action&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;Security</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;BinarySecurityToken</span> <span style="color:#00c">EncodingType=</span><span style="background-color:#fff0f0">&#34;Base64Binary&#34;</span> <span style="color:#00c">valueType=</span><span style="background-color:#fff0f0">&#34;String&#34;</span><span style="color:#070">&gt;</span>Shared/IDL:IceSess\/SessMgr:1\.0.IDL/Common/!ICESMS\/ACPCRTC!ICESMSLB\/CRT.LB!-3161758806579122550!1655914!0<span style="color:#070">&lt;/BinarySecurityToken&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/Security&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/SOAP-ENV:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;SOAP-ENV:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;SessionCloseRQ</span> <span style="color:#00c">Version=</span><span style="background-color:#fff0f0">&#34;1.0.0&#34;</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.opentravel.org/OTA/2002/11&#34;</span><span style="color:#070">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/SOAP-ENV:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/SOAP-ENV:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<details ><summary>Пример ответа</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#579">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;soap-env:Envelope</span> <span style="color:#00c">xmlns:soap-env=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;eb:MessageHeader</span> <span style="color:#00c">eb:version=</span><span style="background-color:#fff0f0">&#34;1.0&#34;</span> <span style="color:#00c">soap-env:mustUnderstand=</span><span style="background-color:#fff0f0">&#34;1&#34;</span> <span style="color:#00c">xmlns:eb=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Sabre<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Agency<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:ConversationId&gt;</span>ef18b24d-6c48-48f0-8357-ab4dbfc22742<span style="color:#070">&lt;/eb:ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Service</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;sabreXML&#34;</span><span style="color:#070">&gt;</span>Session<span style="color:#070">&lt;/eb:Service&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Action&gt;</span>SessionCloseRS<span style="color:#070">&lt;/eb:Action&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:MessageId&gt;</span>1647964699332930610<span style="color:#070">&lt;/eb:MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:Timestamp&gt;</span>2018-04-02T19:25:33<span style="color:#070">&lt;/eb:Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:RefToMessageId&gt;</span>9f23c9a8-1cea-4ba4-8edd-b8d2f0335c57<span style="color:#070">&lt;/eb:RefToMessageId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/eb:MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;wsse:Security</span> <span style="color:#00c">xmlns:wsse=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;wsse:BinarySecurityToken</span> <span style="color:#00c">EncodingType=</span><span style="background-color:#fff0f0">&#34;wsse:Base64Binary&#34;</span> <span style="color:#00c">valueType=</span><span style="background-color:#fff0f0">&#34;String&#34;</span><span style="color:#070">&gt;</span>Shared/IDL:IceSess\/SessMgr:1\.0.IDL/Common/!ICESMS\/ACPCRTC!ICESMSLB\/CRT.LB!-3161758806579122550!1655914!0<span style="color:#070">&lt;/wsse:BinarySecurityToken&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/wsse:Security&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;SessionCloseRS</span> <span style="color:#00c">status=</span><span style="background-color:#fff0f0">&#34;Approved&#34;</span> <span style="color:#00c">version=</span><span style="background-color:#fff0f0">&#34;1&#34;</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.opentravel.org/OTA/2002/11&#34;</span><span style="color:#070">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/soap-env:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<h3 id="получение-информации-об-используемых-сессиях-oltmc-user-disp-name">
  Получение информации об используемых сессиях (OLTMC USER DISP NAME)
  <a class="anchor" href="#%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b8%d0%bd%d1%84%d0%be%d1%80%d0%bc%d0%b0%d1%86%d0%b8%d0%b8-%d0%be%d0%b1-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d1%83%d0%b5%d0%bc%d1%8b%d1%85-%d1%81%d0%b5%d1%81%d1%81%d0%b8%d1%8f%d1%85-oltmc-user-disp-name">#</a>
</h3>
<p>Для того чтобы узнать количество используемых на данный момент сессий для определенного iPCC необходимо отправить терминальную команду <code>OLTMC USER DISP NAME [iPCC]</code> при помощи сервиса <a href="commands.html">SabreCommandLLSRQ</a> или в терминале Sabre Red.</p>
<p>Например, для получения информации о сессиях для iPCC 9LSC необходимо отправить команду <code>OLTMC USER DISP NAME 9LSC</code>.</p>
<p>Ответ будет содержать информацию о количестве используемых сессий (<code>INUSE</code>) и о максимальном количестве доступных сессий для данного iPCC (<code>MAX</code>).</p>
<details open><summary>Пример ответа системы</summary>
  <div class="markdown-inner">
    <pre tabindex="0"><code>CSMP0097I 05.05.34 CPU-D SS-BSS  SSU-AA   IS-01                 
                                                                
-TAM USER CONTROL FILE-                                         
 MAXIMUM DEFINABLE USERS    - 14999                             
 MAXIMUM CONFIGURABLE USERS - 14999                             
 CURRENT NUMBER USERS -       14507                             
 USER FLUSH CRET TIME VALUE -   60                              
-TAM USER FILE-                                                 
NAME             UORD T/O O OXIT RXIT S    MAX      INUSE   PCT 
---------------- ---- --- - ---- ---- - --------- --------- --- 
9LSC             2549  15             A        50         1   0 
 KEYWORDS - TA/9LSC CRTSST  DYNTAC  HSSPDB                      
 DELTAS - OBTAIN    0  RELEASE    0 FLUSH VALUE    5            
 DR CANDIDATE - N  REPORT - N                                   
 INUSE DATE - 08.29.2016                                        
                                                                
END OF DISPLAY                                                  
</code></pre>
  </div>
</details>

<h3 id="использование-сессий-созданных-в-sabre-red-oiath">
  Использование сессий, созданных в Sabre Red (OIATH)
  <a class="anchor" href="#%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d1%81%d0%b5%d1%81%d1%81%d0%b8%d0%b9-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d1%85-%d0%b2-sabre-red-oiath">#</a>
</h3>
<p>Во время процесса разработки может быть полезно использование <em>общего состояния</em>, как при работе через Sabre APIs, так и при работе в терминале Sabre Red. Под <em>общим состоянием</em> подразумевается текущие несохраненные данные в бронировании, очередях и других объектах системы. Например, использование <em>общего состояния</em> позволяет добавить в бронирование сегменты при помощи сервиса <a href="https://developer.sabre.com/docs/soap_apis/air/book/orchestrated_air_booking">EnhancedAirBookRQ</a> без его сохранения, а затем увидеть эти сегменты в терминале Sabre Red, отправив команду <code>*A</code>.</p>
<p>Для этого необходимо в терминале Sabre Red отправить команду <code>OIATH</code> и получить в виде ответа токен сессии. Данный токен можно использовать при отправке запросов так же, как и токен созданный при помощи сервиса <a href="https://developer.sabre.com/docs/soap_apis/session_management/create_session">SessionCreateRQ</a>.</p>
<h2 id="токены-доступа">
  Токены доступа
  <a class="anchor" href="#%d1%82%d0%be%d0%ba%d0%b5%d0%bd%d1%8b-%d0%b4%d0%be%d1%81%d1%82%d1%83%d0%bf%d0%b0">#</a>
</h2>
<h3 id="создание-токена-доступа-tokencreaterq">
  Создание токена доступа (TokenCreateRQ)
  <a class="anchor" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%82%d0%be%d0%ba%d0%b5%d0%bd%d0%b0-%d0%b4%d0%be%d1%81%d1%82%d1%83%d0%bf%d0%b0-tokencreaterq">#</a>
</h3>
<p>Для создания токена доступа используется сервис <a href="https://developer.sabre.com/docs/read/soap_apis/session_management/create_access_token">TokenCreateRQ</a>.</p>
<p>Ответ будет содержать токен доступа <code>wsse:BinarySecurityToken</code>, который необходимо использовать при отправке других запросов.</p>
<details ><summary>Пример запроса</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;SOAP-ENV:Envelope</span> <span style="color:#00c">xmlns:SOAP-ENV=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;SOAP-ENV:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;MessageHeader</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;PartyId&gt;</span>Agency<span style="color:#070">&lt;/PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;PartyId&gt;</span>Sabre<span style="color:#070">&lt;/PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;ConversationId&gt;</span>d8667e6f-0050-4c98-8fbe-ed8d79a008a4<span style="color:#070">&lt;/ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;MessageId&gt;</span>4873775b-aa60-43bc-ae9b-7d1840bc6daa<span style="color:#070">&lt;/MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Timestamp&gt;</span>2018-04-02T19:25:50<span style="color:#070">&lt;/Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/MessageData&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;Action&gt;</span>TokenCreateRQ<span style="color:#070">&lt;/Action&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;Security</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;UsernameToken&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Username&gt;</span>{{username}}<span style="color:#070">&lt;/Username&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Password&gt;</span>{{password}}<span style="color:#070">&lt;/Password&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Organization&gt;</span>{{pcc}}<span style="color:#070">&lt;/Organization&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;Domain&gt;</span>DEFAULT<span style="color:#070">&lt;/Domain&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/UsernameToken&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/Security&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/SOAP-ENV:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;SOAP-ENV:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;TokenCreateRQ</span> <span style="color:#00c">Version=</span><span style="background-color:#fff0f0">&#34;1.0.0&#34;</span> <span style="color:#00c">xmlns=</span><span style="background-color:#fff0f0">&#34;http://webservices.sabre.com&#34;</span><span style="color:#070">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/SOAP-ENV:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/SOAP-ENV:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<details ><summary>Пример ответа</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;soap-env:Envelope</span> <span style="color:#00c">xmlns:soap-env=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;eb:MessageHeader</span> <span style="color:#00c">eb:version=</span><span style="background-color:#fff0f0">&#34;1.0&#34;</span> <span style="color:#00c">soap-env:mustUnderstand=</span><span style="background-color:#fff0f0">&#34;1&#34;</span> <span style="color:#00c">xmlns:eb=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Sabre<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Agency<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:ConversationId&gt;</span>d8667e6f-0050-4c98-8fbe-ed8d79a008a4<span style="color:#070">&lt;/eb:ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Service</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;sabreXML&#34;</span><span style="color:#070">&gt;</span>Session<span style="color:#070">&lt;/eb:Service&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Action&gt;</span>TokenCreateRS<span style="color:#070">&lt;/eb:Action&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:MessageId&gt;</span>1648742699503030611<span style="color:#070">&lt;/eb:MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:Timestamp&gt;</span>2018-04-02T19:25:50<span style="color:#070">&lt;/eb:Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:RefToMessageId&gt;</span>4873775b-aa60-43bc-ae9b-7d1840bc6daa<span style="color:#070">&lt;/eb:RefToMessageId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/eb:MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;wsse:Security</span> <span style="color:#00c">xmlns:wsse=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;wsse:BinarySecurityToken</span> <span style="color:#00c">EncodingType=</span><span style="background-color:#fff0f0">&#34;wsse:Base64Binary&#34;</span> <span style="color:#00c">valueType=</span><span style="background-color:#fff0f0">&#34;String&#34;</span><span style="color:#070">&gt;</span>T1RLAQII6gb1blvvNycUxRL/XU6jz3TzRxBhcKDCU+SK/Lax/8XbqVALAACwy1YZr0cXtc9J6wYs/Ka+9Cxptihqez0exrjLhwuaDEW9A9HEnLpiKkxWxBpfELheq5LOt2EQZ0JMXeLcC5LGbJMZiburegseXnCcUTCSlZA8EpG6pFRBDUfKRH2tgDVrFfdlLth5yD61uve+58IHhpbdMVNkJDlUISf4Q+ZlCPek8ys3ZWZ6P0KXKQ5BCjKh6th0yNJvSWjjOkuhqBVT56Izh0raNQnEpJFbBm/j7GE*<span style="color:#070">&lt;/wsse:BinarySecurityToken&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/wsse:Security&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;sws:TokenCreateRS</span> <span style="color:#00c">Version=</span><span style="background-color:#fff0f0">&#34;1.0.0&#34;</span> <span style="color:#00c">xmlns:sws=</span><span style="background-color:#fff0f0">&#34;http://webservices.sabre.com&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;sws:Success/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/sws:TokenCreateRS&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/soap-env:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

<p>В случае, если логин или пароль в запросе неверные или учетная запись заблокирована, то система вернет ответ с ошибкой <code>USG_AUTHENTICATION_FAILED</code>. В этом случае рекомендуется <a href="configuration.html#%d1%81%d0%bc%d0%b5%d0%bd%d0%b0-%d0%bf%d0%b0%d1%80%d0%be%d0%bb%d1%8f-%d0%b8-%d1%80%d0%b0%d0%b7%d0%b1%d0%bb%d0%be%d0%ba%d0%b8%d1%80%d0%be%d0%b2%d0%ba%d0%b0-epr">сменить пароль и при необходимости разблокировать EPR</a>.</p>
<details ><summary>Пример ответа с ошибкой</summary>
  <div class="markdown-inner">
    <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-XML" data-lang="XML"><span style="display:flex;"><span><span style="color:#070">&lt;soap-env:Envelope</span> <span style="color:#00c">xmlns:soap-env=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;eb:MessageHeader</span> <span style="color:#00c">eb:version=</span><span style="background-color:#fff0f0">&#34;1.0&#34;</span> <span style="color:#00c">soap-env:mustUnderstand=</span><span style="background-color:#fff0f0">&#34;1&#34;</span> <span style="color:#00c">xmlns:eb=</span><span style="background-color:#fff0f0">&#34;http://www.ebxml.org/namespaces/messageHeader&#34;</span><span style="color:#070">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:From&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Sabre<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:From&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:To&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:PartyId</span> <span style="color:#00c">eb:type=</span><span style="background-color:#fff0f0">&#34;URI&#34;</span><span style="color:#070">&gt;</span>Agency<span style="color:#070">&lt;/eb:PartyId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:To&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:ConversationId&gt;</span>dcee8572-2958-47a3-bda5-13b15868325f<span style="color:#070">&lt;/eb:ConversationId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:Action&gt;</span>ErrorRS<span style="color:#070">&lt;/eb:Action&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:MessageId&gt;</span>2327729667967520610<span style="color:#070">&lt;/eb:MessageId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:Timestamp&gt;</span>2020-01-17T18:33:16<span style="color:#070">&lt;/eb:Timestamp&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;eb:RefToMessageId&gt;</span>1a35d735-4582-4756-9f4c-cd627ccf1786<span style="color:#070">&lt;/eb:RefToMessageId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/eb:MessageData&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/eb:MessageHeader&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;wsse:Security</span> <span style="color:#00c">xmlns:wsse=</span><span style="background-color:#fff0f0">&#34;http://schemas.xmlsoap.org/ws/2002/12/secext&#34;</span><span style="color:#070">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Header&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;soap-env:Fault&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;faultcode&gt;</span>soap-env:Client.AuthenticationFailed<span style="color:#070">&lt;/faultcode&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;faultstring&gt;</span>Authentication failed<span style="color:#070">&lt;/faultstring&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;detail&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#070">&lt;StackTrace&gt;</span>com.sabre.universalservices.base.security.AuthenticationException: errors.authentication.USG_AUTHENTICATION_FAILED<span style="color:#070">&lt;/StackTrace&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#070">&lt;/detail&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#070">&lt;/soap-env:Fault&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#070">&lt;/soap-env:Body&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#070">&lt;/soap-env:Envelope&gt;</span>
</span></span></code></pre></div>
  </div>
</details>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  
    <script src="/sabre-apis-ru/assets/js/clipboard.js"></script>


</body>
</html>












